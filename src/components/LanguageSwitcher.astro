---
import { getLangFromUrl } from '../i18n/utils';
import styles from './LanguageSwitcher.module.css';

const lang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname;

// Replace the language prefix in the current path
const pathWithoutLang = currentPath.replace(/^\/(es|en)/, '') || '/';
const esPath = `/es${pathWithoutLang}`;
const enPath = `/en${pathWithoutLang}`;
---

<div class={styles.switcher}>
  <a href={esPath} class={`${styles.lang} ${lang === 'es' ? styles.active : ''}`}>ES</a>
  <span class={styles.separator}>|</span>
  <a href={enPath} class={`${styles.lang} ${lang === 'en' ? styles.active : ''}`}>EN</a>
</div>
