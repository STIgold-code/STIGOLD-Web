---
import { getLangFromUrl, useTranslations, getLocalizedPath } from '../../i18n/utils';
import { services } from '../../data/services';
import ServiceCard from '../ServiceCard.astro';
import AnimatedText from '../AnimatedText.tsx';
import styles from './Services.module.css';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section class={styles.section} id="servicios">
  <div class={styles.container}>
    <AnimatedText client:visible>
      <div class={styles.header}>
        <h2 class={styles.title}>{t('services.title')}</h2>
        <p class={styles.subtitle}>{t('services.subtitle')}</p>
      </div>
    </AnimatedText>

    <div class={styles.grid}>
      {services.map((service, i) => (
        <AnimatedText client:visible delay={i * 0.1}>
          <ServiceCard
            icon={service.icon}
            title={t(service.titleKey as any)}
            description={t(service.descriptionKey as any)}
            linkText={t('services.viewMore')}
            linkHref={getLocalizedPath(`/servicios/${service.slug}`, lang)}
          />
        </AnimatedText>
      ))}
    </div>
  </div>
</section>
