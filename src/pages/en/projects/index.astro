---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ProjectCard from '../../../components/ProjectCard.astro';
import AnimatedText from '../../../components/AnimatedText.tsx';
import styles from '../../../components/sections/Portfolio.module.css';

const allProjects = await getCollection('projects');
const projects = allProjects
  .filter(p => p.data.lang === 'en')
  .sort((a, b) => b.data.date.localeCompare(a.data.date));
---

<BaseLayout title="Projects - STIGOLD" description="Discover the projects developed by STIGOLD." lang="en">
  <section class={styles.section}>
    <div class={styles.container}>
      <AnimatedText client:visible>
        <div class={styles.header}>
          <h1 class={styles.title}>Our Projects</h1>
          <p class={styles.subtitle}>Discover some of the projects we have developed.</p>
        </div>
      </AnimatedText>

      <div class={styles.grid}>
        {projects.map((project, i) => (
          <AnimatedText client:visible delay={i * 0.1}>
            <ProjectCard
              title={project.data.title}
              description={project.data.description}
              thumbnail={project.data.thumbnail}
              tags={project.data.tags}
              href={`/en/projects/${project.data.slug}`}
            />
          </AnimatedText>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
